@page
@model CRM.Web.Pages.Finance.PaymentPlans.IndexModel

@{
    ViewData["Title"] = "Ödeme Planları";
}

<div class="d-flex justify-content-between align-items-center mb-3">
    <h2>@ViewData["Title"]</h2>
    <a class="btn btn-brand" asp-page="Create">Yeni Ödeme Planı</a>
</div>

<div class="dashboard-section">
    <form method="get" class="row g-2 mb-3">
        <div class="col-md-4">
            <input type="text" name="customer" value="@Model.CustomerFilter" class="form-control" placeholder="Müşteri adı/ticari unvan" />
        </div>
        <div class="col-auto">
            <button type="submit" class="btn btn-outline-primary">Ara</button>
        </div>
        <div class="col-auto">
            <a class="btn btn-outline-secondary" asp-page="Index">Temizle</a>
        </div>
    </form>

    <table class="table table-hover align-middle"
           data-crm-datatable="true"
           data-disable-last-column="true"
           data-order-column="5"
           data-order-direction="desc">
        <thead>
            <tr>
                <th>Plan</th>
                <th>Müşteri</th>
                <th>Sevkiyat</th>
                <th>Tip</th>
                <th>Tutar</th>
                <th>Başlangıç</th>
                <th class="text-end">İşlemler</th>
            </tr>
        </thead>
        <tbody>
        @foreach (var plan in Model.Plans)
        {
            <tr>
                <td>@plan.Id</td>
                <td>@plan.CustomerName</td>
                <td>@plan.ShipmentReference</td>
                <td>@plan.PlanType</td>
                <td>@plan.TotalAmount.ToString("C2") @plan.Currency</td>
                <td>@plan.StartDate.ToString("d")</td>
                <td class="text-end">
                    <a class="btn btn-sm btn-outline-primary" asp-page="Details" asp-route-id="@plan.Id">Detay</a>
                </td>
            </tr>
        }
        </tbody>
    </table>
</div>

